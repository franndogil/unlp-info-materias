PA EQU 30H
CA EQU 32H
EOI EQU 20H
IMR EQU 21H
INT1 EQU 25H
CONT EQU 10H
COMP EQU 11H

N_TIMER EQU 10

ORG 40
IP_TIMER DW RUT_TIMER

ORG 1000H
MSJ DB "HOLA MUNDO"
FIN_MSJ DB ?
CANT_C DB ?
FINAL DB ?

ORG 3500H
RUT_TIMER:MOV FINAL, 1
          MOV AL, EOI
          OUT EOI, AL
          IRET

ORG 3100H
IMP_NUM:MOV AL, 255
        OUT PA, AL
        RET

ORG 3000H
IMP_CAR:MOV AL, [BX]
        OUT PA, AL
        INC BX
        RET

ORG 2000H
CLI
MOV AL, 11111101B
OUT IMR, AL
MOV AL, N_TIMER
OUT INT1, AL
MOV AL, 0
OUT CA, AL
MOV AL, 0
OUT CONT, AL
MOV AL, 30
OUT COMP, AL
STI
MOV BX, OFFSET MSJ
MOV CANT_C, OFFSET FIN_MSJ - OFFSET MSJ
LAZO: CMP FINAL, 1
      JZ FIN
      CALL IMP_CAR
      CALL IMP_NUM
      DEC CANT_C
      JNZ LAZO
FIN:  INT 0
END